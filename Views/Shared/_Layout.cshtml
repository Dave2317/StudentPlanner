
@{
    var title = ViewData["Title"] as string ?? "StudentPlanner";
}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@title - StudentPlanner</title>
    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="~/css/site.css" asp-append-version="true" />
</head>
<body data-theme="light">
    <header>
        <nav class="navbar navbar-expand-sm navbar-light app-navbar shadow-sm">
            <div class="container">
                <a class="navbar-brand brand-logo d-flex align-items-center" asp-controller="Home" asp-action="Index">
                    <div class="logo-badge me-2">SP</div>
                    <div class="d-flex flex-column">
                        <span class="brand-name">StudentPlanner</span>
                        <span class="brand-tagline">Plan • Study • Track</span>
                    </div>
                </a>

                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#mainNavbar"
                        aria-controls="mainNavbar" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <div class="collapse navbar-collapse" id="mainNavbar">
                    <ul class="navbar-nav ms-4 me-auto">
                        <li class="nav-item">
                            <a class="nav-link @((title == "Dashboard") ? "active" : "")"
                               asp-controller="Home" asp-action="Index">
                                Dashboard
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link @((title == "Daily Entries") ? "active" : "")"
                               asp-controller="DayEntries" asp-action="Index">
                                Daily Entries
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link @((title == "Reports") ? "active" : "")"
                               asp-controller="Home" asp-action="Reports">
                                Reports
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link @((title == "Settings") ? "active" : "")"
                               asp-controller="Home" asp-action="Settings">
                                Settings
                            </a>
                        </li>
                    </ul>

                    @* <div class="d-flex align-items-center gap-3">
                        <span class="small text-muted d-none d-md-inline">Theme</span>
                        <button id="theme-toggle" class="btn btn-outline-light theme-toggle-btn" type="button"
                                title="Toggle light / dark">
                            <span id="theme-icon">🌙</span>
                        </button>
                    </div> *@

                    <div class="d-flex align-items-center gap-3 theme-label-wrapper">
    <span class="theme-label">Theme</span>
    <button id="theme-toggle" class="btn btn-outline-light theme-toggle-btn" type="button"
            title="Toggle light / dark">
        <span id="theme-icon">🌙</span>
    </button>
</div>

                </div>
            </div>
        </nav>
    </header>

    <div class="app-body">
        <main role="main" class="container py-4">
            @RenderBody()
        </main>
    </div>
<footer class="sp-footer">
    <div class="container">
        <div class="sp-footer-main">
            <!-- Brand block -->
            <div class="sp-footer-brand-block">
                <div class="sp-footer-logo-circle">SP</div>
                <div>
                    <div class="sp-footer-name">StudentPlanner</div>
                    <div class="sp-footer-tagline">Plan · Study · Track</div>
                </div>
            </div>

            <!-- Info columns (static text, not nav links) -->
            <div class="sp-footer-columns">
                <div class="sp-footer-col">
                    <h6>Product</h6>
                    <p>Weekly overview</p>
                    <p>Study reminders</p>
                    <p>Progress insights</p>
                </div>
                <div class="sp-footer-col">
                    <h6>For Students</h6>
                    <p>Time blocking</p>
                    <p>Assignment tracking</p>
                    <p>Exam preparation</p>
                </div>
                <div class="sp-footer-col">
                    <h6>Support</h6>
                    <p>Help &amp; tips</p>
                    <p>Data export (.csv)</p>
                    <p>Privacy &amp; security</p>
                </div>
            </div>
        </div>

        <hr class="sp-footer-divider" />

        <div class="sp-footer-bottom">
            <div class="sp-footer-copy">
                &copy; @DateTime.Now.Year StudentPlanner. All rights reserved.
            </div>
            <div class="sp-footer-social">
                <span class="sp-footer-social-label">Follow</span>
                <span class="sp-footer-social-dot">●</span>
                <span class="sp-footer-social-dot">●</span>
                <span class="sp-footer-social-dot">●</span>
            </div>
        </div>
    </div>
</footer>

    <script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
<script>
    (function () {
        const body = document.body;
        const btn = document.getElementById('theme-toggle');
        const icon = document.getElementById('theme-icon');

        function updateThemeLabel(mode) {
            const label = document.getElementById('current-theme-name');
            if (label) {
                label.textContent = mode;
            }
        }

        function applyTheme(mode) {
            // Set data attribute for CSS
            body.setAttribute('data-theme', mode);

            // Persist for next visits
            localStorage.setItem('sp-theme', mode);

            // Also store in cookie so the controller can read it
            document.cookie = "theme=" + mode + "; path=/; max-age=31536000";

            // Update icon
            icon.textContent = mode === 'dark' ? '☀️' : '🌙';

            // Update Settings page label if present
            updateThemeLabel(mode);
        }

        // On load, pick saved theme or default to body attribute / light
        const savedTheme = localStorage.getItem('sp-theme');
        const initialTheme = savedTheme || body.getAttribute('data-theme') || 'light';
        applyTheme(initialTheme);

        // Toggle on click
        btn?.addEventListener('click', function () {
            const current = body.getAttribute('data-theme') || 'light';
            const next = current === 'light' ? 'dark' : 'light';
            applyTheme(next);
        });
    })();
</script>


    @RenderSection("Scripts", required: false)
</body>
</html>
